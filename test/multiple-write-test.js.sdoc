Test for multiple simultaneous writes to the same record

caterwaul.clone('std', 'error', 'db.file')(function () {
  var db          = this[caterwaul].db.file('test-db'),
      long_string = 'c';

  for (var i = 0; i < 16; ++i) long_string += long_string;
  for (var i = 0; i < 100; ++i) db('record').update('foo', long_string + i);

  db.get('record', fn[r][error.fail['#{r.foo} was not #{long_string + (i - 1)}'], unless[r.foo === long_string + (i - 1)]]);
})();
