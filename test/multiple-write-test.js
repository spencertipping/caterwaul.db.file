// Test for multiple simultaneous writes to the same record

caterwaul.clone('std error iter db.file')(function () {
  var db          = caterwaul.db.file('test-db'),
      long_string = 'c';

  iter.n[i, 16][long_string += long_string];
  iter.n[i, 100][db('record')({foo: long_string + i}),
                 db('record#{i}')({bar: i + long_string})];

  setTimeout(fn_[
    db('record')(fn[r][error.fail['#{r.foo} was not #{long_string + 99}'], unless[r.foo === long_string + 99]]),
    iter.n[i, 100][db('record#{i}')(let[k = i] in fn[r][error.fail['#{r.bar} was not #{k}#{long_string}'], unless[r.bar === k + long_string]])]], 2000);
})();

// Generated by SDoc 
