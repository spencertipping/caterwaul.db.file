sdocp('test/multiple-write-test.js.sdoc', 'Test for multiple simultaneous writes to the same record\n\ncaterwaul.clone(\'std seq db.file\')(function () {\n  var db          = caterwaul.db.file(\'test-db\'),\n      long_string = \'c\';\n\n  var range = fn[n][seq[0 >>>[_ + 1] <<[_ < n]]];\n\n  seq[range(16) *![long_string += long_string]];\n  seq[range(100) *!i[db(\'record\')({foo: long_string + i}),\n                     db(\'record#{i}\')({bar: i + long_string})]];\n\n  setTimeout(fn_[\n    db(\'record\')(fn[r][null[\'#{r.foo} was not #{long_string + 99}\'], unless[r.foo === long_string + 99]]),\n    seq[range(100) *!i[db(\'record#{i}\')(let[k = i] in fn[r][null[\'#{r.bar} was not #{k}#{long_string}\'], unless[r.bar === k + long_string]])]]], 2000);\n})();\n');